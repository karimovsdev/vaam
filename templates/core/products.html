{% extends "core/base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Products" %} - {{ settings.site_name }}{% endblock %}
{% block meta_description %}{% trans "Browse our full range of products. Quality solutions for every need." %}{% endblock %}

{% block content %}
<!-- PAGE HEADER -->
<section class="relative py-24 md:py-32 overflow-hidden">
    <div class="absolute inset-0 bg-dark-900"></div>
    <div class="absolute inset-0 bg-gradient-to-br from-primary-900/40 via-dark-900 to-dark-800"></div>
    <div class="absolute inset-0 dot-pattern opacity-[0.03]"></div>
    <div class="relative z-10 max-w-7xl mx-auto px-6 text-center">
        <div class="flex items-center justify-center gap-3 mb-4">
            <span class="w-8 h-[2px] bg-primary-400"></span>
            <span class="text-primary-400 text-sm font-semibold tracking-[0.2em] uppercase">{% trans "Our Products" %}</span>
            <span class="w-8 h-[2px] bg-primary-400"></span>
        </div>
        <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-4">{% trans "Solar Panel Products" %}</h1>
        <p class="text-white/60 text-lg max-w-2xl mx-auto">{% trans "Premium quality solar panels for every application" %}</p>
        <div class="flex justify-center gap-2 mt-8 text-sm">
            <a href="{% url 'core:home' %}" class="text-white/60 hover:text-white transition">{% trans "Home" %}</a>
            <span class="text-white/30">/</span>
            <span class="text-primary-400">{% trans "Products" %}</span>
        </div>
    </div>
</section>

<!-- CATEGORY FILTER -->
{% if categories %}
<section class="py-8 border-b border-slate-100">
    <div class="max-w-7xl mx-auto px-6">
        <div class="flex flex-wrap justify-center gap-2">
            <a href="{% url 'core:products' %}" class="px-5 py-2 rounded-full text-sm font-medium transition-all {% if not active_category %}bg-primary-600 text-white{% else %}bg-slate-100 text-slate-600 hover:bg-primary-50 hover:text-primary-700{% endif %}">{% trans "All Products" %}</a>
            {% for cat in categories %}
            <a href="{% url 'core:products' %}?category={{ cat.slug }}" class="px-5 py-2 rounded-full text-sm font-medium transition-all {% if active_category == cat.slug %}bg-primary-600 text-white{% else %}bg-slate-100 text-slate-600 hover:bg-primary-50 hover:text-primary-700{% endif %}">{{ cat.name }}</a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- PRODUCTS GRID -->
<section class="section-padding">
    <div class="max-w-7xl mx-auto px-6">
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for product in products %}
            <div class="group bg-white rounded-2xl overflow-hidden border border-slate-100 hover:border-primary-200 transition-all duration-500 hover:shadow-xl hover:shadow-primary-100/30">
                <div class="relative overflow-hidden h-64">
                    {% if product.image %}<img src="{{ product.image.url }}" alt="{{ product.name }}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700" loading="lazy">{% endif %}
                    <div class="absolute inset-0 bg-gradient-to-t from-slate-900/50 via-transparent to-transparent"></div>
                    {% if product.is_featured %}<div class="absolute top-4 left-4"><span class="px-3 py-1 bg-accent-500 text-white rounded-full text-xs font-semibold">{% trans "Featured" %}</span></div>{% endif %}
                    <div class="absolute bottom-4 left-4"><span class="px-3 py-1 bg-white/90 backdrop-blur-sm text-primary-700 rounded-full text-xs font-semibold">{{ product.category.name }}</span></div>
                </div>
                <div class="p-6">
                    <h3 class="text-lg font-bold text-slate-900 mb-2 group-hover:text-primary-700 transition-colors">{{ product.name }}</h3>
                    <p class="text-slate-500 text-sm mb-4 leading-relaxed">{{ product.short_description|truncatewords:15 }}</p>
                    {% if product.price %}<p class="text-primary-600 font-bold mb-3">{{ product.price }}</p>{% endif %}
                    <div class="flex gap-2">
                        <a href="{% url 'core:product_detail' product.slug %}" class="flex-1 text-center bg-primary-600 text-white px-4 py-2.5 rounded-xl text-sm font-semibold hover:bg-primary-700 transition">{% trans "View Details" %}</a>
                        <a href="https://wa.me/{{ settings.whatsapp|default:'994501234567' }}?text=Hello!%20I'm%20interested%20in%20{{ product.name|urlencode }}" target="_blank" class="w-11 h-11 bg-emerald-50 text-emerald-600 rounded-xl flex items-center justify-center hover:bg-emerald-100 transition"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-span-full text-center py-20">
                <i class="fas fa-box-open text-5xl text-slate-200 mb-4"></i>
                <h3 class="text-xl font-bold text-slate-400">{% trans "No products found" %}</h3>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endblock %}
