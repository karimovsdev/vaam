{% extends "dashboard/base.html" %}

{% block title %}Message from {{ item.full_name }}{% endblock %}
{% block page_title %}Message Detail{% endblock %}

{% block breadcrumb %}
<span class="text-[#899bbd]">/</span>
<a href="{% url 'dashboard:message_list' %}" class="text-[#899bbd] hover:text-primary transition">Messages</a>
<span class="text-[#899bbd]">/</span>
<span class="text-[#899bbd]">Detail</span>
{% endblock %}

{% block content %}
<div class="max-w-4xl">
    <!-- Message Info -->
    <div class="bg-white rounded-md mb-6" style="box-shadow:0px 0px 30px rgba(1,41,112,.05);">
        <div class="flex items-center justify-between px-5 py-4 border-b border-[#e6e9f4]">
            <h5 class="text-lg font-bold text-heading font-heading">Message Details</h5>
            <div>
                {% if item.status == 'new' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-primary bg-primary/10 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> New</span>
                {% elif item.status == 'read' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-[#899bbd] bg-gray-100 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> Read</span>
                {% elif item.status == 'replied' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-success bg-success/10 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> Replied</span>
                {% elif item.status == 'archived' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-[#899bbd] bg-gray-100 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> Archived</span>
                {% endif %}
            </div>
        </div>
        <div class="p-6 space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Full Name</p>
                    <p class="text-sm text-heading font-semibold">{{ item.full_name }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Email</p>
                    <p class="text-sm text-heading">{{ item.email }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Subject</p>
                    <p class="text-sm text-heading">{{ item.subject }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Date</p>
                    <p class="text-sm text-heading">{{ item.created_at|date:"M d, Y H:i" }}</p>
                </div>
            </div>
            <div class="pt-4 border-t border-[#e6e9f4]">
                <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-2">Message</p>
                <div class="bg-[#f6f9ff] rounded p-4 text-sm text-body leading-relaxed">{{ item.message|linebreaks }}</div>
            </div>
        </div>
    </div>

    <!-- Status Update Form -->
    <div class="bg-white rounded-md" style="box-shadow:0px 0px 30px rgba(1,41,112,.05);">
        <div class="px-5 py-4 border-b border-[#e6e9f4]">
            <h5 class="text-lg font-bold text-heading font-heading">Update Status</h5>
        </div>
        <form method="post" class="p-6">
            {% csrf_token %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                <div>
                    <label for="id_status" class="block text-sm font-semibold text-heading mb-2 font-heading">Status</label>
                    {{ form.status }}
                </div>
                <div class="md:col-span-2">
                    <label for="id_admin_notes" class="block text-sm font-semibold text-heading mb-2 font-heading">Admin Notes</label>
                    {{ form.admin_notes }}
                </div>
            </div>
            <div class="flex items-center justify-between mt-8 pt-5 border-t border-[#e6e9f4]">
                <a href="{% url 'dashboard:message_list' %}" class="inline-flex items-center gap-2 text-[#899bbd] hover:text-heading text-sm font-semibold transition">
                    <i class="bi bi-arrow-left"></i> Back to Messages
                </a>
                <button type="submit" class="px-6 py-2.5 rounded bg-primary text-white text-sm font-semibold hover:bg-primary-dark transition-all duration-200">
                    <i class="bi bi-save mr-1.5"></i> Save
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
