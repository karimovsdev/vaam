{% extends "dashboard/base.html" %}

{% block title %}Inquiry from {{ item.full_name }}{% endblock %}
{% block page_title %}Inquiry Detail{% endblock %}

{% block breadcrumb %}
<span class="text-[#899bbd]">/</span>
<a href="{% url 'dashboard:inquiry_list' %}" class="text-[#899bbd] hover:text-primary transition">Inquiries</a>
<span class="text-[#899bbd]">/</span>
<span class="text-[#899bbd]">Detail</span>
{% endblock %}

{% block content %}
<div class="max-w-4xl">
    <!-- Contact Information -->
    <div class="bg-white rounded-md mb-6" style="box-shadow:0px 0px 30px rgba(1,41,112,.05);">
        <div class="flex items-center justify-between px-5 py-4 border-b border-[#e6e9f4]">
            <h5 class="text-lg font-bold text-heading font-heading">Contact Information</h5>
            <div>
                {% if item.status == 'new' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-primary bg-primary/10 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> New</span>
                {% elif item.status == 'reviewing' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-amber-600 bg-amber-50 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> Reviewing</span>
                {% elif item.status == 'quoted' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-blue-600 bg-blue-50 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> Quoted</span>
                {% elif item.status == 'in_progress' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-indigo-600 bg-indigo-50 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> In Progress</span>
                {% elif item.status == 'completed' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-success bg-success/10 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> Completed</span>
                {% elif item.status == 'cancelled' %}
                <span class="inline-flex items-center gap-1 text-xs font-semibold text-[#899bbd] bg-gray-100 px-2.5 py-1 rounded-full"><i class="bi bi-circle-fill text-[5px]"></i> Cancelled</span>
                {% endif %}
            </div>
        </div>
        <div class="p-6 space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Full Name</p>
                    <p class="text-sm text-heading font-semibold">{{ item.full_name }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Email</p>
                    <p class="text-sm text-heading"><a href="mailto:{{ item.email }}" class="text-primary hover:underline">{{ item.email }}</a></p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Phone</p>
                    <p class="text-sm text-heading">{{ item.phone|default:'-' }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Company</p>
                    <p class="text-sm text-heading">{{ item.company_name|default:'-' }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Delivery Country</p>
                    <p class="text-sm text-heading font-semibold">{{ item.delivery_country }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Date Submitted</p>
                    <p class="text-sm text-heading">{{ item.created_at|date:"M d, Y H:i" }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Details -->
    <div class="bg-white rounded-md mb-6" style="box-shadow:0px 0px 30px rgba(1,41,112,.05);">
        <div class="px-5 py-4 border-b border-[#e6e9f4]">
            <h5 class="text-lg font-bold text-heading font-heading">Product Details</h5>
        </div>
        <div class="p-6 space-y-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Product Category</p>
                    <p class="text-sm text-heading">{{ item.product_category.name|default:'Not specified' }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Quantity</p>
                    <p class="text-sm text-heading">{{ item.quantity|default:'-' }}</p>
                </div>
                <div>
                    <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-1">Budget Range</p>
                    <p class="text-sm text-heading">{{ item.budget_range|default:'-' }}</p>
                </div>
            </div>
            <div class="pt-4 border-t border-[#e6e9f4]">
                <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-2">Product Description</p>
                <div class="bg-[#f6f9ff] rounded p-4 text-sm text-body leading-relaxed">{{ item.product_description|linebreaks }}</div>
            </div>
            {% if item.additional_notes %}
            <div class="pt-4 border-t border-[#e6e9f4]">
                <p class="text-xs font-semibold text-[#899bbd] uppercase tracking-wider mb-2">Additional Notes</p>
                <div class="bg-[#f6f9ff] rounded p-4 text-sm text-body leading-relaxed">{{ item.additional_notes|linebreaks }}</div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Status Update Form -->
    <div class="bg-white rounded-md" style="box-shadow:0px 0px 30px rgba(1,41,112,.05);">
        <div class="px-5 py-4 border-b border-[#e6e9f4]">
            <h5 class="text-lg font-bold text-heading font-heading">Update Status</h5>
        </div>
        <form method="post" class="p-6">
            {% csrf_token %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                <div>
                    <label for="id_status" class="block text-sm font-semibold text-heading mb-2 font-heading">Status</label>
                    <select name="status" id="id_status" class="w-full px-4 py-2.5 border border-[#e6e9f4] rounded text-sm text-heading focus:outline-none focus:border-primary transition">
                        <option value="new" {% if item.status == 'new' %}selected{% endif %}>New</option>
                        <option value="reviewing" {% if item.status == 'reviewing' %}selected{% endif %}>Reviewing</option>
                        <option value="quoted" {% if item.status == 'quoted' %}selected{% endif %}>Quoted</option>
                        <option value="in_progress" {% if item.status == 'in_progress' %}selected{% endif %}>In Progress</option>
                        <option value="completed" {% if item.status == 'completed' %}selected{% endif %}>Completed</option>
                        <option value="cancelled" {% if item.status == 'cancelled' %}selected{% endif %}>Cancelled</option>
                    </select>
                </div>
                <div class="md:col-span-2">
                    <label for="id_admin_notes" class="block text-sm font-semibold text-heading mb-2 font-heading">Admin Notes</label>
                    <textarea name="admin_notes" id="id_admin_notes" rows="4" class="w-full px-4 py-2.5 border border-[#e6e9f4] rounded text-sm text-heading focus:outline-none focus:border-primary transition resize-y">{{ item.admin_notes }}</textarea>
                </div>
            </div>
            <div class="flex items-center justify-between mt-8 pt-5 border-t border-[#e6e9f4]">
                <a href="{% url 'dashboard:inquiry_list' %}" class="inline-flex items-center gap-2 text-[#899bbd] hover:text-heading text-sm font-semibold transition">
                    <i class="bi bi-arrow-left"></i> Back to Inquiries
                </a>
                <button type="submit" class="px-6 py-2.5 rounded bg-primary text-white text-sm font-semibold hover:bg-primary-dark transition-all duration-200">
                    <i class="bi bi-save mr-1.5"></i> Save
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
